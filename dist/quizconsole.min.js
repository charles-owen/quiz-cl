"use strict";(self.webpackChunkcse335=self.webpackChunkcse335||[]).push([[716],{87554:(t,n,e)=>{var s=e(34802),i=function(t){return(0,s.dD)("data-v-4daa2f14"),t=t(),(0,s.Cn)(),t},r={class:"content"},l={class:"full"},a={class:"small"},u=i((function(){return(0,s._)("th",null,"User",-1)})),o=i((function(){return(0,s._)("th",null,"Name",-1)})),c=i((function(){return(0,s._)("th",null,"Email",-1)})),d=i((function(){return(0,s._)("th",null,"Role",-1)})),f={class:"small"},h={key:0},g=["src"],m={key:0},w={key:0,class:"center"};function p(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return v(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var s=0,i=function(){};return{s:i,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return l=t.done,t},e:function(t){a=!0,r=t},f:function(){try{l||null==e.return||e.return()}finally{if(a)throw r}}}}function v(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,s=new Array(n);e<n;e++)s[e]=t[e];return s}var z=Site.MembersFetcherComponentVue;const k={extends:Site.ConsoleComponentBase,props:["assigntag"],data:function(){return{quizTags:[],results:null,assignment:null}},methods:{process:function(t){for(var n in this.results=t,t)if(t.hasOwnProperty(n))for(var e in t[n])t[n].hasOwnProperty(e)&&this.quizTags.indexOf(e)<0&&this.quizTags.push(e)},status:function(t,n){var e=this.quizResult(t,n);return null===e?"":e.points+"/"+e.maxpoints},total:function(t){if(null===this.results||null===this.assignment)return"";var n,e=0,s=p(this.quizTags);try{for(s.s();!(n=s.n()).done;){var i=n.value,r=this.quizResult(t,i);null!==r&&(e+=+r.points)}}catch(t){s.e(t)}finally{s.f()}return e+"/"+this.assignment.quiz},quizResult:function(t,n){if(null===this.results)return null;var e=t.member.id;return void 0!==this.results[e]&&void 0!==this.results[e][n]?this.results[e][n]:null},link:function(t,n){return"".concat(Site.root,"/cl/console/quiz/result/").concat(t.member.id,"/").concat(this.assignment.tag,"/").concat(n)},recompute:function(){var t=this;this.$site.api.post("/api/quiz/recompute/"+this.assignment.tag,{}).then((function(n){n.hasError()&&t.$site.toast(t,n)})).catch((function(n){t.$site.toast(t,n)}))}},components:{membersfetcher:z},mounted:function(){var t=this,n=this.$store.state.user.user.member,e={semester:n.semester,section:n.section};this.section=this.$store.getters["course/section"](n.semester,n.section),this.assignment=this.section.getAssignment(this.assigntag),this.$root.setTitle(": "+this.assignment.shortname+" Quiz Status"),this.$site.api.get("/api/quiz/all/"+this.assigntag,e).then((function(n){if(n.hasError())t.$site.toast(t,n);else{var e=n.getData("quiz-results-all");null!==e&&t.process(e.attributes.results)}})).catch((function(n){console.log(n),t.$site.toast(t,n)}))}};var _=e(43546),y=e.n(_),b=e(19104),q=e.n(b),C=e(85797),D=e.n(C),T=e(74706),$=e.n(T),A=e(10807),S=e.n(A),x=e(37002),Z=e.n(x),E=e(57112),M={};M.styleTagTransform=Z(),M.setAttributes=$(),M.insert=D().bind(null,"head"),M.domAPI=q(),M.insertStyleElement=S();y()(E.Z,M);E.Z&&E.Z.locals&&E.Z.locals;var R=e(17944);const I=(0,R.Z)(k,[["render",function(t,n,e,i,p,v){var z=(0,s.up)("router-link"),k=(0,s.up)("membersfetcher");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[(0,s.Wm)(k,{fetching:null===t.results},{default:(0,s.w5)((function(n){return[(0,s._)("table",a,[(0,s._)("tr",null,[u,o,c,d,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.quizTags,(function(t){return(0,s.wg)(),(0,s.iD)("th",f,(0,s.zw)(t),1)})),256)),null!==t.results?((0,s.wg)(),(0,s.iD)("th",h,"Total")):(0,s.kq)("v-if",!0)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.users,(function(n){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,(0,s.zw)(n.userId),1),(0,s._)("td",null,(0,s.zw)(n.name),1),(0,s._)("td",null,(0,s.zw)(n.email),1),(0,s._)("td",null,(0,s.zw)(n.roleName()),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.quizTags,(function(e){return(0,s.wg)(),(0,s.iD)("td",null,[(0,s.Uk)((0,s.zw)(v.status(n,e))+" ",1),null!==v.quizResult(n,e)?((0,s.wg)(),(0,s.j4)(z,{key:0,to:v.link(n,e)},{default:(0,s.w5)((function(){return[(0,s._)("img",{src:t.root+"/vendor/cl/site/img/eye16.png"},null,8,g)]})),_:2},1032,["to"])):(0,s.kq)("v-if",!0)])})),256)),null!==t.results?((0,s.wg)(),(0,s.iD)("td",m,(0,s.zw)(v.total(n)),1)):(0,s.kq)("v-if",!0)])})),256))])]})),_:1},8,["fetching"]),t.user.atLeast(this.$site.Member.INSTRUCTOR)?((0,s.wg)(),(0,s.iD)("p",w,[(0,s._)("button",{onClick:n[0]||(n[0]=(0,s.iM)((function(){return v.recompute&&v.recompute.apply(v,arguments)}),["prevent","stop"]))},"Recompute Grades")])):(0,s.kq)("v-if",!0)])])}],["__scopeId","data-v-4daa2f14"]]);var U=function(t){return(0,s.dD)("data-v-5666a896"),t=t(),(0,s.Cn)(),t},O={class:"content"},N={class:"full"},H={key:0},Q={class:"cl-about"},K=U((function(){return(0,s._)("span",null,"Course Member: ",-1)})),L=U((function(){return(0,s._)("span",null,"Assignment: ",-1)})),P=U((function(){return(0,s._)("span",null,"Quiz: ",-1)})),Y={key:0,class:"small center"},j=U((function(){return(0,s._)("tr",null,[(0,s._)("th"),(0,s._)("th",{class:"center"},"When Taken"),(0,s._)("th",null,"Finished?"),(0,s._)("th",null,"Points"),(0,s._)("th",null,"Max")],-1)})),B=["onClick"],F=["src"],W=["onClick"],V=["onClick"],G=["onClick"],X=["onClick"],J={key:1,class:"center"},tt={key:2,class:"small center"},nt=U((function(){return(0,s._)("tr",null,[(0,s._)("th",null,"#"),(0,s._)("th",null,"Points"),(0,s._)("th",null,"Asked"),(0,s._)("th",null,"Answered")],-1)})),et=["onClick"],st={key:3},it=[U((function(){return(0,s._)("p",{class:"centerbox primary center"},"No answers provided for this quiz try.",-1)}))],rt={key:4,class:"cl-quiz"},lt=["innerHTML"],at=U((function(){return(0,s._)("h3",null,"Student answer:",-1)})),ut={class:"code"},ot={key:0},ct=U((function(){return(0,s._)("h3",null,"Correct answer:",-1)})),dt={class:"code"};var ft=Site.FetcherVue;const ht={extends:Site.ConsoleComponentBase,props:["memberid","assigntag","quiztag"],data:function(){return{fetching:!0,quizUser:null,section:null,assignment:null,tries:null,token:null,answers:null,answer:null}},components:{fetcher:ft},mounted:function(){var t=this;this.$root.setTitle(": Quiz Result"),this.addNav2Link("Exit",2,"/cl/console/quiz/results/"+this.assigntag),this.$site.api.get("/api/quiz/result/".concat(this.memberid,"/").concat(this.assigntag,"/").concat(this.quiztag),{}).then((function(n){if(n.hasError())t.$site.toast(t,n);else{t.quizUser=new Site.User(n.getData("quiz-user").attributes);var e=t.quizUser.member;t.section=t.$store.getters["course/section"](e.semester,e.section),t.assignment=t.section.getAssignment(t.assigntag),t.tries=n.getData("quiz-tries").attributes;var s=n.getData("quiz-answers");null!==s?(t.token=s.id,t.answers=s.attributes,t.answer=t.answers.length>0?t.answers[0]:null):(t.token=null,t.answers=null,t.answer=null),t.fetching=!1}})).catch((function(n){console.log(n),t.$site.toast(t,n)}))},methods:{time:function(t){return this.$site.TimeFormatter.relativeUNIX(t)},elapsed:function(t,n){if(null===n)return"";var e=n-t,s=e%60;return Math.floor(e/60)+":"+(s<10?"0":"")+s},selectTry:function(t){var n=this;this.$site.api.get("/api/quiz/result/token/".concat(t),{}).then((function(e){if(e.hasError())n.$site.toast(n,e);else{n.token=t;var s=e.getData("quiz-answers");null!==s?(n.answers=s.attributes,n.answer=n.answers.length>0?n.answers[0]:null):(n.answers=null,n.answer=null),n.fetching=!1}})).catch((function(t){console.log(t),n.$site.toast(n,t)}))},selectAnswer:function(t){this.answer=this.answers[t-1]},deleteTry:function(t){var n=this,e=t.token;new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to delete this quiz try?",this.$site.Dialog.MessageBox.OKCANCEL,(function(){n.$site.api.post("/api/quiz/result/token/"+e+"/delete",{}).then((function(t){t.hasError()?n.$site.toast(n,t):(n.tries=n.tries.filter((function(t,n,s){return t.token!==e})),n.answers=null,n.answer=null,n.tries.length>0?n.selectTry(n.tries[0].token):n.token=null)})).catch((function(t){n.$site.toast(n,t)}))}))}}};var gt=e(8934),mt={};mt.styleTagTransform=Z(),mt.setAttributes=$(),mt.insert=D().bind(null,"head"),mt.domAPI=q(),mt.insertStyleElement=S();y()(gt.Z,mt);gt.Z&&gt.Z.locals&&gt.Z.locals;const wt=(0,R.Z)(ht,[["render",function(t,n,e,i,r,l){var a=(0,s.up)("fetcher");return(0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",N,[(0,s.Wm)(a,{fetching:t.fetching},{default:(0,s.w5)((function(){return[t.fetching?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("div",Q,[(0,s._)("p",null,[K,(0,s._)("span",null,(0,s.zw)(t.quizUser.name),1)]),(0,s._)("p",null,[L,(0,s._)("span",null,(0,s.zw)(t.assignment.name),1)]),(0,s._)("p",null,[P,(0,s._)("span",null,(0,s.zw)(e.quiztag),1)])]),t.tries.length>0?((0,s.wg)(),(0,s.iD)("table",Y,[j,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.tries,(function(n){return(0,s.wg)(),(0,s.iD)("tr",{class:(0,s.C_)(n.token===t.token?"selected":"")},[(0,s._)("td",null,[n.token===t.token?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:function(t){return l.deleteTry(n)}},[(0,s._)("img",{src:t.root+"/cl/img/x.png"},null,8,F)],8,B)):(0,s.kq)("v-if",!0)]),(0,s._)("td",{onClick:function(t){return l.selectTry(n.token)}},(0,s.zw)(l.time(n.start)),9,W),(0,s._)("td",{onClick:function(t){return l.selectTry(n.token)}},(0,s.zw)(l.elapsed(n.start,n.end)),9,V),(0,s._)("td",{onClick:function(t){return l.selectTry(n.token)}},(0,s.zw)(n.points),9,G),(0,s._)("td",{onClick:function(t){return l.selectTry(n.token)}},(0,s.zw)(n.maxpoints),9,X)],2)})),256))])):((0,s.wg)(),(0,s.iD)("p",J,"No quiz tries!")),null!==t.answers&&t.answers.length>0?((0,s.wg)(),(0,s.iD)("table",tt,[nt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.answers,(function(n){return(0,s.wg)(),(0,s.iD)("tr",{class:(0,s.C_)(null!==t.answer&&n.num===t.answer.num?"selected":""),onClick:function(t){return l.selectAnswer(n.num)}},[(0,s._)("td",null,(0,s.zw)(n.num),1),(0,s._)("td",null,(0,s.zw)(n.points),1),(0,s._)("td",null,(0,s.zw)(l.time(n.questiontime)),1),(0,s._)("td",null,(0,s.zw)(l.time(n.answertime)),1)],10,et)})),256))])):(0,s.kq)("v-if",!0),null!==t.answers&&0===t.answers.length?((0,s.wg)(),(0,s.iD)("div",st,it)):(0,s.kq)("v-if",!0),null!==t.answer?((0,s.wg)(),(0,s.iD)("div",rt,[(0,s._)("div",null,[(0,s._)("h2",null,"Question: "+(0,s.zw)(t.answer.num)+" of "+(0,s.zw)(t.answers.length),1),(0,s._)("div",{class:"question",innerHTML:t.answer.question},null,8,lt),at,(0,s._)("pre",ut,(0,s.zw)(t.answer.studentanswer),1),t.answer.rightanswer.length>0?((0,s.wg)(),(0,s.iD)("div",ot,[ct,(0,s._)("pre",dt,(0,s.zw)(t.answer.rightanswer),1)])):(0,s.kq)("v-if",!0)])])):(0,s.kq)("v-if",!0)]))]})),_:1},8,["fetching"])])])}],["__scopeId","data-v-5666a896"]]);var pt=function(){};pt.setup=function(t){t.tables.add({title:"Quiz",order:60,api:"/api/quiz/tables"}),t.components.addRoute({route:"/quiz/results/:assigntag",component:I,props:!0}),t.components.addRoute({route:"/quiz/result/:memberid/:assigntag/:quiztag",component:wt,props:!0}),t.CourseConsole.assignmentLink("quiz","quizzes","/quiz/results/:assigntag")},Site.Console&&!Site.Console.Quiz&&(pt.setup(Site.Console),Site.Console.Quiz=!0)},8934:(t,n,e)=>{e.d(n,{Z:()=>a});var s=e(28742),i=e.n(s),r=e(75336),l=e.n(r)()(i());l.push([t.id,"div.cl-about[data-v-5666a896]{margin:1em auto;display:table}div.cl-about p[data-v-5666a896]{display:table-row}div.cl-about p span[data-v-5666a896]{display:table-cell;text-align:left}div.cl-about p span[data-v-5666a896]:first-child{text-align:right;padding-right:1em}tr[data-v-5666a896]{cursor:pointer}tr[data-v-5666a896]:first-child{cursor:default}tr.selected td[data-v-5666a896]{background:#8ff}",""]);const a=l},57112:(t,n,e)=>{e.d(n,{Z:()=>a});var s=e(28742),i=e.n(s),r=e(75336),l=e.n(r)()(i());l.push([t.id,"table td[data-v-4daa2f14]{text-align:center}table td[data-v-4daa2f14]:nth-child(1),table td[data-v-4daa2f14]:nth-child(2),table td[data-v-4daa2f14]:nth-child(3),table td[data-v-4daa2f14]:nth-child(4){text-align:left}",""]);const a=l}},t=>{t.O(0,[736,828,77,530,592],(()=>{return n=87554,t(t.s=n);var n}));t.O()}]);