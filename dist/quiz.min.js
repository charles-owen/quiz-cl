"use strict";(self.webpackChunkcse335=self.webpackChunkcse335||[]).push([[55],{20892:(e,t,i)=>{var n=i(54571),r=i.n(n),s=i(50063),u=i.n(s),o=i(14971),a=i.n(o),l=i(78446),c=i.n(l),d=i(71984),h=i.n(d),f=i(63641),m=i.n(f),p=i(83315),v={};v.styleTagTransform=m(),v.setAttributes=c(),v.insert=a().bind(null,"head"),v.domAPI=u(),v.insertStyleElement=h();r()(p.Z,v);p.Z&&p.Z.locals&&p.Z.locals;var g=i(66759),q=["innerHTML"],w={key:0,class:"center"},z={key:1,class:"centerbox seconda center"},y={key:2},b={key:0,class:"center"},k={key:1};var S=function(){};S.INITIAL=0,S.START=1,S.QUESTION=2,S.RESULTS=3,S.PREVIEW=4;const T={props:["quiz"],data:function(){return{numTries:0,allowedTries:0,numFinished:0}},mounted:function(){this.allowedTries=+this.quiz["allowed-tries"],this.numTries=+this.quiz["num-tries"],this.numFinished=+this.quiz["num-finished"]},methods:{proceed:function(){this.$emit("new-state",S.START)},results:function(){this.$emit("new-state",S.RESULTS)}}};var _=i(87619);const M=(0,_.Z)(T,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",null,[(0,g._)("div",{innerHTML:i.quiz.splash},null,8,q),null===i.quiz.lightning?((0,g.wg)(),(0,g.iD)("p",w,"This quiz has no specified time limit.")):(0,g.kq)("v-if",!0),null!==i.quiz.lightning?((0,g.wg)(),(0,g.iD)("p",z,"This is a lightning quiz. You have "+(0,g.zw)(i.quiz.lightning)+" seconds to answer each question.",1)):(0,g.kq)("v-if",!0),0===e.allowedTries?((0,g.wg)(),(0,g.iD)("p",y,[(0,g.Uk)("When ready, "),(0,g._)("a",{onClick:t[0]||(t[0]=(0,g.iM)((function(e){return s.proceed()}),["prevent"]))},"click to proceed to the quiz."),(0,g.Uk)(" You can also "),(0,g._)("a",{onClick:t[1]||(t[1]=(0,g.iM)((function(e){return s.results()}),["prevent"]))},"jump directly to your quiz results.")])):((0,g.wg)(),(0,g.iD)(g.HY,{key:3},[e.numTries<e.allowedTries?((0,g.wg)(),(0,g.iD)(g.HY,{key:0},[e.allowedTries>0?((0,g.wg)(),(0,g.iD)("p",b,"You have "+(0,g.zw)(e.allowedTries-e.numTries)+" "+(0,g.zw)(e.allowedTries-e.numTries>1?"tries":"try")+" left.",1)):(0,g.kq)("v-if",!0),(0,g._)("p",null,[(0,g.Uk)("When ready, "),(0,g._)("a",{onClick:t[2]||(t[2]=(0,g.iM)((function(e){return s.proceed()}),["prevent"]))},"click to proceed to the quiz."),(0,g.Uk)(" You can also "),(0,g._)("a",{onClick:t[3]||(t[3]=(0,g.iM)((function(e){return s.results()}),["prevent"]))},"jump directly to your quiz results.")])],64)):((0,g.wg)(),(0,g.iD)("p",k,[(0,g.Uk)("You have completed your maximum number of tries for this quiz and can no longer take it. You can "),(0,g._)("a",{onClick:t[4]||(t[4]=(0,g.iM)((function(e){return s.results()}),["prevent"]))},"jump directly to your quiz results.")]))],64))])}]]);var D={key:0},x={key:0},$={key:1,class:"center"},I=["value"],A=["innerHTML"],E=(0,g._)("p",null,[(0,g._)("button",{type:"submit"},"Submit")],-1);function H(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return u=e.done,e},e:function(e){o=!0,s=e},f:function(){try{u||null==i.return||i.return()}finally{if(o)throw s}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var U=function(){};U.get=function(e,t){var i,n=e.$refs.form,r=new FormData(n),s=H(n.querySelectorAll("input.cl-answer-required"));try{for(s.s();!(i=s.n()).done;){var u=i.value,o=r.get(u.name);if(null===o||""===o){if(void 0!==t)return e.$site.toast(e,t),null;if("radio"===u.type)e.$site.toast(e,"You must choose an option");else e.$site.toast(e,"You must provide an answer");return null}}}catch(e){s.e(e)}finally{s.f()}return r};const Y={data:function(){return{active:null,question:null,time:0,mustProvideMessage:void 0,remainingMinutes:null,remainingSeconds:null,remainingSecondsStr:null}},props:["quiz"],mounted:function(){var e=this;this.$site.api.post("/api/quiz/question/".concat(this.quiz.token,"/").concat(this.quiz.question),{}).then((function(t){if(t.hasError())e.$site.toast(e,t);else{var i=t.getData("quiz-question");e.take(i.attributes)}})).catch((function(t){e.$site.toast(e,t)}))},methods:{take:function(e){var t=this;this.active=!0,this.question=e.question,this.time=e.time,this.mustProvideMessage=e.mustProvideMessage;var i=document.getElementById("cl-quiz-after");null!==i&&void 0!==e.after&&(i.innerHTML=e.after),this.$site.Vue.nextTick((function(){t.$site.message("cl-quiz-after-installed",null)})),null!==this.quiz.lightning&&(this.remainingMinutes=Math.floor(this.quiz.lightning/60),this.remainingSeconds=this.quiz.lightning%60,this.remainingSecondsStr=this.remainingSeconds<10?"0"+this.remainingSeconds:this.remainingSeconds,this.timer())},timer:function(){var e=this;setTimeout((function(){e.active&&(e.remainingSeconds--,e.remainingSecondsStr=e.remainingSeconds<10?"0"+e.remainingSeconds:e.remainingSeconds,0!==e.remainingSeconds||0!==e.remainingMinutes?(e.remainingSeconds<0&&(e.remainingMinutes--,e.remainingSeconds=59,e.remainingSecondsStr="59"),e.timer()):e.$emit("new-state",S.QUESTION))}),1e3)},proceed:function(){},submit:function(){var e=this,t=U.get(this,this.mustProvideMessage);null!==t&&this.$site.api.post("/api/quiz/answer/".concat(this.quiz.token,"/").concat(this.quiz.question),t).then((function(t){if(t.hasError())e.$site.toast(e,t);else{var i=t.getData("quiz-answer");e.active=!1,e.$emit("answer",i)}})).catch((function(t){e.$site.toast(e,t)}))}}},C=(0,_.Z)(Y,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",null,[null!==e.question?((0,g.wg)(),(0,g.iD)("div",D,[i.quiz.length>1?((0,g.wg)(),(0,g.iD)("h2",x,"Question "+(0,g.zw)(i.quiz.question)+" of "+(0,g.zw)(i.quiz.length),1)):(0,g.kq)("v-if",!0),null!==e.remainingSeconds?((0,g.wg)(),(0,g.iD)("p",$,(0,g.zw)(e.remainingMinutes)+":"+(0,g.zw)(e.remainingSecondsStr)+" remaining!",1)):(0,g.kq)("v-if",!0),(0,g._)("form",{ref:"form",method:"post",onSubmit:t[0]||(t[0]=(0,g.iM)((function(){return s.submit&&s.submit.apply(s,arguments)}),["prevent"]))},[(0,g._)("input",{type:"hidden",name:"question-time",value:e.time},null,8,I),(0,g._)("div",{innerHTML:e.question},null,8,A),E],544)])):(0,g.kq)("v-if",!0)])}]]);var P={key:0},Q=["innerHTML"],Z={key:0},O=[(0,g._)("button",{type:"submit"},"Next Question",-1)],R={key:1},j=(0,g._)("p",{class:"done"},"This Quiz is Complete",-1),N={class:"center"};var W={class:"cl-results"},F={key:0},V={class:"small center"},K=(0,g._)("tr",null,[(0,g._)("th",{class:"center"},"When Taken"),(0,g._)("th",null,"Finished?"),(0,g._)("th",null,"Points")],-1),B=(0,g._)("caption",null,"Results for Quiz",-1),J=(0,g._)("p",null,"If a value is indicated in the Finished? column, the quiz was completed in that amount of time (in minutes and seconds).",-1),X={key:1,class:"centerbox primary center"};function G(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ee(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return u=e.done,e},e:function(e){o=!0,s=e},f:function(){try{u||null==i.return||i.return()}finally{if(o)throw s}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}const te={props:["quiz"],data:function(){return{tries:null,high:0}},mounted:function(){var e=this;this.$site.api.get("/api/quiz/results/".concat(this.quiz.assigntag,"/").concat(this.quiz.quiztag),{}).then((function(t){if(t.hasError())e.$site.toast(e,t);else{var i=t.getData("quiz-results");e.tries=i.attributes.tries,e.high=0;var n,r=G(e.tries);try{for(r.s();!(n=r.n()).done;){var s=n.value;+s.points>+e.high&&(e.high=s.points)}}catch(e){r.e(e)}finally{r.f()}}})).catch((function(t){e.$site.toast(e,t)}))},methods:{time:function(e){return this.$site.TimeFormatter.relativeUNIX(e)},elapsed:function(e,t){if(null===t)return"";var i=t-e,n=i%60;return Math.floor(i/60)+":"+(n<10?"0":"")+n}}},ie=(0,_.Z)(te,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",W,[null!==e.tries&&e.tries.length>0?((0,g.wg)(),(0,g.iD)("div",F,[(0,g._)("p",null,"Your current best score for this quiz is "+(0,g.zw)(e.high)+"/"+(0,g.zw)(i.quiz.points)+". The system retains your best result as your grade for a quiz.",1),(0,g._)("table",V,[K,((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.tries,(function(t){return(0,g.wg)(),(0,g.iD)("tr",{class:(0,g.C_)(e.high>0&&t.points===e.high?"best":"")},[(0,g._)("td",null,(0,g.zw)(s.time(t.start)),1),(0,g._)("td",null,(0,g.zw)(s.elapsed(t.start,t.end)),1),(0,g._)("td",null,(0,g.zw)(t.points),1)],2)})),256)),B]),J])):(0,g.kq)("v-if",!0),null!==e.tries&&0===e.tries.length?((0,g.wg)(),(0,g.iD)("p",X,"You have not yet completed the quiz, yet, so you do not have a score.")):(0,g.kq)("v-if",!0)])}]]),ne={data:function(){return{}},props:["quiz"],components:{results:ie},methods:{submit:function(){this.quiz.question<this.quiz.length&&this.$emit("new-state",S.QUESTION)},retake:function(){window.location.reload(!0)}}},re=(0,_.Z)(ne,[["render",function(e,t,i,n,r,s){var u=(0,g.up)("results");return(0,g.wg)(),(0,g.iD)("div",null,[i.quiz.length>1?((0,g.wg)(),(0,g.iD)("h2",P,"Question "+(0,g.zw)(i.quiz.question)+" of "+(0,g.zw)(i.quiz.length),1)):(0,g.kq)("v-if",!0),(0,g._)("form",{ref:"form",method:"post",onSubmit:t[0]||(t[0]=(0,g.iM)((function(){return s.submit&&s.submit.apply(s,arguments)}),["prevent"]))},[(0,g._)("div",{innerHTML:i.quiz.answer},null,8,Q),i.quiz.question<i.quiz.length?((0,g.wg)(),(0,g.iD)("p",Z,O)):(0,g.kq)("v-if",!0)],544),i.quiz.question>=i.quiz.length?((0,g.wg)(),(0,g.iD)("div",R,[j,(0,g._)("p",N,[(0,g.Uk)("You may "),(0,g._)("a",{onClick:t[1]||(t[1]=(0,g.iM)((function(){return s.retake&&s.retake.apply(s,arguments)}),["prevent"]))},"retake the quiz"),(0,g.Uk)(" if you wish")]),(0,g.Wm)(u,{quiz:i.quiz},null,8,["quiz"])])):(0,g.kq)("v-if",!0)])}]]);var se=(0,g._)("p",{class:"centerbox comp"},"The quiz has expired and can no longer be taken. Quizzes expire at the time the assignment is due. ",-1),ue=(0,g._)("p",null,"You can proceed through the quiz for practice purposes, but new grades and submissions will not be possible.",-1);const oe={props:["quiz"],methods:{proceed:function(){this.$emit("new-state",S.START)},results:function(){this.$emit("new-state",S.RESULTS)}}},ae=(0,_.Z)(oe,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",null,[se,ue,(0,g._)("p",null,[(0,g.Uk)("When ready, "),(0,g._)("a",{onClick:t[0]||(t[0]=(0,g.iM)((function(e){return s.proceed()}),["prevent"]))},"click to proceed to the quiz."),(0,g.Uk)(" You can also "),(0,g._)("a",{onClick:t[1]||(t[1]=(0,g.iM)((function(e){return s.results()}),["prevent"]))},"jump directly to your quiz results.")])])}]]);var le=[(0,g._)("p",{class:"centerbox comp center"},"The quiz is closed and not available at this time.",-1)];const ce={props:["quiz"]},de=(0,_.Z)(ce,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",null,le)}]]);var he={class:"previewer"},fe=(0,g._)("h2",null,"Staff Question Previews",-1),me=(0,g._)("p",null,[(0,g.Uk)("These links allow you to preview quiz questions. If the question is randomly selected from multiple files, the files appear below the question. "),(0,g._)("span",{class:"smallred"},"This part of the page appears for staff members only.")],-1),pe={class:"small"},ve={key:0},ge=["onClick"];const qe={props:["quiz"],data:function(){return{previews:[]}},mounted:function(){for(var e=0;e<this.quiz.preview.length;e++)this.previews.push({num:e+1,files:this.quiz.preview[e]})},methods:{preview:function(e){this.$emit("preview",e)}}},we=(0,_.Z)(qe,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",he,[fe,me,(0,g._)("div",pe,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.previews,(function(e){return(0,g.wg)(),(0,g.iD)("div",{key:e.num},[(0,g._)("h3",null,"Question "+(0,g.zw)(e.num),1),e.files.length>0?((0,g.wg)(),(0,g.iD)("ul",ve,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.files,(function(e){return(0,g.wg)(),(0,g.iD)("li",null,[(0,g._)("a",{onClick:(0,g.iM)((function(t){return s.preview(e)}),["prevent"])},(0,g.zw)(e),9,ge)])})),256))])):(0,g.kq)("v-if",!0)])})),128))])])}]]);var ze={class:"preview"},ye={key:0},be={key:0,class:"preview"},ke=["value"],Se=["innerHTML"],Te=(0,g._)("p",null,[(0,g._)("button",{type:"submit"},"Submit")],-1),_e=(0,g._)("hr",null,null,-1),Me={key:0},De=["innerHTML"],xe={key:1},$e=(0,g._)("h3",null,"Comment",-1),Ie=["innerHTML"];const Ae={data:function(){return{question:null,comment:null,time:0,mustProvideMessage:void 0}},props:["quiz","file"],watch:{file:function(e,t){this.fetch()}},mounted:function(){this.fetch()},methods:{fetch:function(){var e=this,t={file:this.file};this.$site.api.get("/api/quiz/preview/".concat(this.quiz.token),t).then((function(t){if(t.hasError())e.$site.toast(e,t);else{var i=t.getData("quiz-question");e.question=i.attributes.question,e.time=i.attributes.time,e.comment=i.attributes.comment,e.answers=i.attributes.answers,e.mustProvideMessage=i.attributes.mustProvideMessage;var n=document.getElementById("cl-quiz-after");null!==n&&(n.innerHTML=i.attributes.after),e.$site.Vue.nextTick((function(){e.$site.message("cl-quiz-after-installed",null)}))}})).catch((function(t){e.$site.toast(e,t)}))},proceed:function(){},submit:function(){U.get(this,this.mustProvideMessage)}}},Ee=(0,_.Z)(Ae,[["render",function(e,t,i,n,r,s){return(0,g.wg)(),(0,g.iD)("div",ze,[null!==e.question?((0,g.wg)(),(0,g.iD)("div",ye,[i.quiz.length>1?((0,g.wg)(),(0,g.iD)("p",be,"Preview of "+(0,g.zw)(i.quiz.question)+". Available to staff only.",1)):(0,g.kq)("v-if",!0),(0,g._)("form",{ref:"form",method:"post",onSubmit:t[0]||(t[0]=(0,g.iM)((function(){return s.submit&&s.submit.apply(s,arguments)}),["prevent"]))},[(0,g._)("input",{type:"hidden",name:"question-time",value:e.time},null,8,ke),(0,g._)("div",{innerHTML:e.question},null,8,Se),Te,_e,e.answers.length>0?((0,g.wg)(),(0,g.iD)("h3",Me,"Answers")):(0,g.kq)("v-if",!0),((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.answers,(function(e){return(0,g.wg)(),(0,g.iD)("div",null,[(0,g._)("div",{innerHTML:e},null,8,De)])})),256)),null!==e.comment?((0,g.wg)(),(0,g.iD)("div",xe,[$e,(0,g._)("div",{innerHTML:e.comment,class:"centerbox primary"},null,8,Ie)])):(0,g.kq)("v-if",!0)],544)])):(0,g.kq)("v-if",!0)])}]]);var He=function(e){var t=e.VueHelper;this.initialize=function(i){var n=JSON.parse(i.textContent),r=t.createApp({template:'\n<div class="cl-quiz">\n  <component :is="page" :quiz="quiz" :file="file" v-on:answer="answer($event)" v-on:new-state="newState($event)"></component>\n  <previewer v-if="quiz.preview !== undefined" :quiz="quiz" v-on:preview="preview($event)"></previewer>\n</div>',data:function(){return{quiz:n,state:S.INITIAL,page:"initial",file:null,after:null}},components:{initial:M,question:C,answer:re,expired:ae,closed:de,results:ie,previewer:we,preview:Ee},mounted:function(){!0===this.quiz.expired?this.page="expired":!0===this.quiz.closed&&(this.page="closed"),this.after=document.getElementById("cl-quiz-after"),null!==this.after&&(this.after.innerHTML="")},methods:{newState:function(e){switch(e){case S.START:this.start();break;case S.QUESTION:this.quiz.question<this.quiz.length?(this.quiz.question++,this.page="question"):(this.page="results",this.state=e,null!==this.after&&(this.after.innerHTML=""));break;case S.RESULTS:this.page="results",this.state=e,null!==this.after&&(this.after.innerHTML="")}},start:function(){this.state=S.QUESTION,this.quiz.question=1,this.page="question"},answer:function(e){this.state=S.ANSWER,this.page="answer",this.quiz.answer=e.attributes.answer},preview:function(e){this.file=e,this.quiz.question=e,this.state=S.PREVIEW,this.page="preview"}}});r.config.globalProperties.$site=e,t.mount(r,i)}},Le=function(){};Le.create=function(e){var t=new He(e);return e.start((function(){var e=document.querySelector("div.cl-quiz-install");null!==e&&t.initialize(e)})),t},Site.Quiz||(Site.Quiz=Le.create(Site))},83315:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(47289),r=i.n(n),s=i(38306),u=i.n(s)()(r());u.push([e.id,"div.cl-quiz{-moz-box-shadow:3px 3px 8px #ccc;-webkit-box-shadow:3px 3px 8px #ccc;box-shadow:3px 3px 8px #ccc}div.cl-quiz{border:solid #ccc 1pt;padding:6px;margin:1em 0;min-height:15em;align-items:center;justify-content:center;background:#ecffef}div.cl-quiz>div{width:100%}div.cl-quiz>div.content{padding:0}div.cl-quiz div.cl-results{width:80%;margin:0 auto}div.cl-quiz h2{border:0;margin-top:14px}div.cl-quiz div.cl-multi{margin:1em 0;padding:0 0 0 3em}div.cl-quiz div.cl-multi p{margin:0}div.cl-quiz p.done{background:#c41425;text-align:center;color:#fff}div.cl-quiz button{width:10em;font-size:.9em}div.cl-quiz tr.best td{background:#dde}div.cl-quiz div.previewer{clear:both;border-top:1px solid #000}div.cl-quiz div.previewer h3{margin:0;font-size:1.2em}div.cl-quiz div.previewer ul{margin-top:0}div.cl-quiz div.preview{margin:0 0 1em 0}div.cl-quiz div.preview hr{margin:0}div.cl-quiz div.preview h3{text-align:center}div.cl-quiz div.preview p.preview{font-style:italic;margin-top:0;text-align:center;border-bottom:1px solid #000}div.cl-quiz p.cl-quiz-answer-note{text-align:center;font-style:italic;color:#800}@media only screen and (max-width: 750px){#quiz{margin-right:5px}}",""]);const o=u}},e=>{e.O(0,[736,77,530,592],(()=>{return t=20892,e(e.s=t);var t}));e.O()}]);